import{_ as B,d as L,r as u,c as E,o as j,a as F,p as M,b as _,e as f,f as $,i as z,g as Y,w as K,h as t,j as H,n as J,u as v,k as W,l as g,m as i,q as Q,v as Z,F as P,s as N,t as T,x as G,y as s,z as q}from"./index.4f2a6859.js";const U="PROVIDE_INJECT_KEY_ACCORDION_LIST",X=L({__name:"AccordionList",props:{openMultipleItems:{type:Boolean,required:!1},state:{type:null,required:!1},setClosePropertyTime:{type:Number,required:!1}},emits:["update:state"],setup(O,{emit:m}){const r=O,p=u({}),d=E({set(n){!!r.state?m("update:state",n):p.value=n},get(){return r.state?r.state:p.value}}),y=E(()=>Object.values(d.value).some(n=>n));let b=0,a=null;const h=u();function k(){var o;a==null||a.disconnect(),a=new ResizeObserver(e=>{e.forEach(({target:l,contentRect:A})=>{var c,S,D,x;l.classList.contains("accordion-item__content")&&((S=(c=l.parentElement)==null?void 0:c.style)==null||S.setProperty("--content-height",`${A.height}px`)),l.tagName.toLowerCase()==="summary"&&((x=(D=l.parentElement)==null?void 0:D.style)==null||x.setProperty("--summary-height",`${A.height}px`))})}),(((o=h.value)==null?void 0:o.querySelectorAll(".accordion-item__content, summary"))||[]).forEach(e=>a==null?void 0:a.observe(e))}function I(n){!!a&&k();const e=!y.value||!!r.openMultipleItems,l=n.id||(b++).toString(),c=!!n.defaultOpened&&e||!!n.isOnServerOpened||d.value[l];return d.value[l]=c,{id:l,isItemOpened:c}}function C(n){const o={...d.value},e=!o[n];r.openMultipleItems||Object.keys(o).forEach(l=>o[l]=!1),o[n]=e,d.value=o}return j(k),F(()=>{!a||(a.disconnect(),a=null)}),M(U,{init:I,trigger:C,setClosePropertyTime:r.setClosePropertyTime||100,accordionListState:d}),(n,o)=>(_(),f("div",{ref_key:"rootElementRef",ref:h,class:"accordion-list"},[$(n.$slots,"default")],512))}});var V=B(X,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/library/accordion/AccordionList.vue"]]);const ee=["open","data-id","data-is-on-server-opened"],te=["onClick"],oe={class:"accordion-item__summary-title"},ne={key:0,class:"accordion-item__summary-icon"},se={key:1,class:"accordion-item__summary-icon accordion-item__summary-icon--default"},ie={class:"accordion-item__content"},ae=L({__name:"AccordionItem",props:{id:{type:String,required:!1},defaultOpened:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1}},setup(O){const m=O,{trigger:r,init:p,accordionListState:d,setClosePropertyTime:y}=z(U)||{},b=E(()=>(d==null?void 0:d.value[h.value])||!1),a=u(),h=u(""),k=u(!1),I=u(b.value),C=u(!1),n=u("");Y(async()=>{if(!p){console.error("no initItem function provided, please use AccordionItem only inside AccordionList");return}const{id:c,isItemOpened:S}=p({...m});C.value=S,n.value=c}),j(()=>{var D,x,R;if(!p){console.error("no initItem function provided, please use AccordionItem only inside AccordionList");return}(D=a.value)!=null&&D.dataset.id&&(h.value=a.value.dataset.id);const c=((R=(x=a.value)==null?void 0:x.dataset)==null?void 0:R.isOnServerOpened)=="true",{id:S}=p({...m,isOnServerOpened:c});h.value=S});function o(){!r||m.disabled||r(h.value)}const e=E(()=>({"accordion-item--open":b.value||C.value,"accordion-item--disabled":m.disabled}));function l(){k.value=!0}function A(){k.value=!1,I.value=b.value}return K(b,c=>{if(c){I.value=!0;return}setTimeout(()=>{k.value||(I.value=!1)},y)}),(c,S)=>(_(),f("details",{ref_key:"detailsRef",ref:a,class:J(["accordion-item",v(e)]),open:I.value||C.value,"data-id":n.value,"data-is-on-server-opened":C.value,onTransitionrun:l,onTransitionend:A},[t("summary",{class:"accordion-item__summary",onClick:H(o,["prevent"])},[t("span",oe,[$(c.$slots,"summary")]),c.$slots.icon?(_(),f("span",ne,[$(c.$slots,"icon")])):(_(),f("span",se))],8,te),t("div",ie,[$(c.$slots,"default")])],42,ee))}});var w=B(ae,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/library/accordion/AccordionItem.vue"]]);const le=G('<div class="adv"><div class="adv__image">\u{1FA97}</div><ul><li>Zero dependency</li><li>SSR friendly</li><li>Block resize friendly</li><li>v-model controlled</li><li>Default-open feature</li><li>Dynamic content reaction</li><li>Dynamic items allowed</li><li>Animated (optional, controlled by css)</li><li>Exclude closed item&#39;s content from tab loop</li><li>All content is provided by slots</li><li>Css fully customizable</li><li>W3C validator passed</li></ul><div class="adv__links"><ul><li><a href="https://sticker0ne.github.io/vue3-rich-accordion/">Demo</a></li><li><a href="https://github.com/sticker0ne/vue3-rich-accordion">Repository</a></li><li><a href="https://www.npmjs.com/package/vue3-rich-accordion">NPM</a></li><li><a href="https://www.youtube.com/watch?v=ubtEdHwq8QU">YouTube</a></li></ul></div></div>',1),ce={class:"sandbox"},re=s(" Summary one"),de=s("\u261D\uFE0F"),ue=t("h3",null,"Dynamic content reaction",-1),me=t("h3",null,"All content is provided by slots (f.g. you can nest another accordion)",-1),_e=s("Nested accordion item-2 is closed default"),pe=s("+"),ve=s(" Some nested content "),fe=s("Nested accordion item-2 is opened default"),he=s("+"),ye=s(" Here some text of nested item-2 "),be=s("This item is disabled you can control it via v-model"),ke=s(" \u{1F480}"),Ie=s(" You can control it via v-model "),Ce=s("This item is dynamically added"),Se=s("D"),ge=s("Last item (with default icon) here"),we=t("div",null,[t("h1",null,[s(" Please subscribe "),t("a",{href:"https://www.youtube.com/channel/UCxKF1Edfy3LfvAsnveD-OVA"},"youtube channel"),s(", "),t("a",{href:"https://t.me/developers_workshop"},"telegram channel"),s(", share video, stay stars and likes ")])],-1),Oe={class:"v-model-rep"},Ae=t("h3",null,"Props",-1),De=s(" Open multiple items "),xe=t("h3",null,"V-model representation",-1),Ee=["checked","onChange"],Pe=t("h3",null,"Dynamic items",-1),Te=t("h3",null,"Block resize",-1),$e=L({__name:"AccordionSandbox",setup(O){const m=u({}),r=u([]),p=u([]),d=u(!1),y=u(100);function b(){r.value.push("Date now is "+Date.now())}function a(){r.value.pop()}function h(){p.value.push("Date now is "+Date.now())}function k(){p.value.pop()}function I(n,o){const e=!!o.target.checked||!1;m.value[n]=e}const C=E(()=>Object.entries(m.value));return(n,o)=>(_(),f(P,null,[le,t("div",ce,[t("div",{class:"sandbox__accordion-block",style:W({width:y.value+"%"})},[g(v(V),{state:m.value,"onUpdate:state":o[0]||(o[0]=e=>m.value=e),"open-multiple-items":d.value},{default:i(()=>[g(v(w),{id:"mId1","default-opened":""},{summary:i(()=>[re]),icon:i(()=>[de]),default:i(()=>[ue,t("div",null,[t("button",{onClick:b},"Add dynamic lines"),t("button",{onClick:a},"Remove dynamic lines")]),(_(!0),f(P,null,N(r.value,(e,l)=>(_(),f("div",{key:l},T(e),1))),128)),me,g(v(V),{"open-multiple-items":""},{default:i(()=>[g(v(w),null,{summary:i(()=>[_e]),icon:i(()=>[pe]),default:i(()=>[ve]),_:1}),g(v(w),{"default-opened":""},{summary:i(()=>[fe]),icon:i(()=>[he]),default:i(()=>[ye]),_:1})]),_:1})]),_:1}),g(v(w),{id:"mId2",disabled:""},{summary:i(()=>[be]),icon:i(()=>[ke]),default:i(()=>[Ie]),_:1}),(_(!0),f(P,null,N(p.value,e=>(_(),q(v(w),{key:e},{summary:i(()=>[Ce]),icon:i(()=>[Se]),default:i(()=>[s(" "+T(e),1)]),_:2},1024))),128)),g(v(w),{id:"mId3"},{summary:i(()=>[ge]),default:i(()=>[we]),_:1})]),_:1},8,["state","open-multiple-items"])],4),t("div",Oe,[Ae,t("div",null,[De,Q(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e),type:"checkbox"},null,512),[[Z,d.value]])]),xe,(_(!0),f(P,null,N(v(C),e=>(_(),f("div",{key:e[0]},[s(T(e[0])+" ",1),t("input",{checked:e[1],type:"checkbox",onChange:l=>I(e[0],l)},null,40,Ee)]))),128)),Pe,t("button",{onClick:h},"Add"),t("button",{onClick:k},"Remove"),Te,t("p",null,"now width is: "+T(y.value)+"%",1),t("button",{onClick:o[2]||(o[2]=e=>y.value-=20)},"Smaller"),t("button",{onClick:o[3]||(o[3]=e=>y.value+=20)},"Bigger")])])],64))}});var Be=B($e,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/components/AccordionSandbox.vue"]]);const Le=L({__name:"IndexPage",setup(O){return(m,r)=>(_(),q(Be))}});var Re=B(Le,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/pages/IndexPage.vue"]]);export{Re as default};
