import{_ as B,d as L,r as u,c as E,o as j,a as F,p as M,b as _,e as f,f as $,i as z,g as K,w as Y,h as t,j as J,n as W,u as v,k as H,l as g,m as i,q as Z,v as G,F as P,s as N,t as T,x as Q,y as s,z as q}from"./index.cda5515b.js";const U="PROVIDE_INJECT_KEY_ACCORDION_LIST",X=L({__name:"AccordionList",props:{openMultipleItems:{type:Boolean,required:!1},state:{type:null,required:!1},setClosePropertyTime:{type:Number,required:!1}},emits:["update:state"],setup(A,{emit:m}){const r=A,p=u({}),d=E({set(o){!!r.state?m("update:state",o):p.value=o},get(){return r.state?r.state:p.value}}),y=E(()=>Object.values(d.value).some(o=>o));let b=0,a=null;const h=u();function I(){var n;a==null||a.disconnect(),a=new ResizeObserver(e=>{e.forEach(({target:l,contentRect:w})=>{var c,S,x,D;l.classList.contains("accordion-item__content")&&((S=(c=l.parentElement)==null?void 0:c.style)==null||S.setProperty("--content-height",`${w.height}px`)),l.tagName.toLowerCase()==="summary"&&((D=(x=l.parentElement)==null?void 0:x.style)==null||D.setProperty("--summary-height",`${w.height}px`))})}),(((n=h.value)==null?void 0:n.querySelectorAll(".accordion-item__content, summary"))||[]).forEach(e=>a==null?void 0:a.observe(e))}function C(o){!!a&&I();const e=!y.value||!!r.openMultipleItems,l=o.id||(b++).toString(),c=!!o.defaultOpened&&e||!!o.isOnServerOpened||d.value[l];return d.value[l]=c,{id:l,isItemOpened:c}}function k(o){const n={...d.value},e=!n[o];r.openMultipleItems||Object.keys(n).forEach(l=>n[l]=!1),n[o]=e,d.value=n}return j(I),F(()=>{!a||(a.disconnect(),a=null)}),M(U,{init:C,trigger:k,setClosePropertyTime:r.setClosePropertyTime||100,accordionListState:d}),(o,n)=>(_(),f("div",{ref_key:"rootElementRef",ref:h,class:"accordion-list"},[$(o.$slots,"default")],512))}});var V=B(X,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/library/accordion/AccordionList.vue"]]);const ee=["open","data-id","data-is-on-server-opened"],te=["onClick"],ne={class:"accordion-item__summary-title"},oe={key:0,class:"accordion-item__summary-icon"},se={key:1,class:"accordion-item__summary-icon accordion-item__summary-icon--default"},ie={class:"accordion-item__content"},ae=L({__name:"AccordionItem",props:{id:{type:String,required:!1},defaultOpened:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1}},setup(A){const m=A,{trigger:r,init:p,accordionListState:d,setClosePropertyTime:y}=z(U)||{},b=E(()=>(d==null?void 0:d.value[h.value])||!1),a=u(),h=u(""),I=u(!1),C=u(b.value),k=u(!1),o=u("");K(async()=>{if(!p){console.error("no initItem function provided, please use AccordionItem only inside AccordionList");return}const{id:c,isItemOpened:S}=p({...m});k.value=S,o.value=c}),j(()=>{var x,D,R;if(!p){console.error("no initItem function provided, please use AccordionItem only inside AccordionList");return}(x=a.value)!=null&&x.dataset.id&&(h.value=a.value.dataset.id);const c=((R=(D=a.value)==null?void 0:D.dataset)==null?void 0:R.isOnServerOpened)=="true",{id:S}=p({...m,isOnServerOpened:c});h.value=S});function n(){!r||m.disabled||r(h.value)}const e=E(()=>({"accordion-item--open":b.value||k.value,"accordion-item--disabled":m.disabled}));function l(){I.value=!0}function w(){I.value=!1,C.value=b.value}return Y(b,c=>{if(c){C.value=!0;return}setTimeout(()=>{I.value||(C.value=!1)},y)}),(c,S)=>(_(),f("details",{ref_key:"detailsRef",ref:a,class:W(["accordion-item",v(e)]),open:C.value||k.value,"data-id":o.value,"data-is-on-server-opened":k.value,onTransitionrun:l,onTransitionend:w},[t("summary",{class:"accordion-item__summary",onClick:J(n,["prevent"])},[t("span",ne,[$(c.$slots,"summary")]),c.$slots.icon?(_(),f("span",oe,[$(c.$slots,"icon")])):(_(),f("span",se))],8,te),t("div",ie,[$(c.$slots,"default")])],42,ee))}});var O=B(ae,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/library/accordion/AccordionItem.vue"]]);const le=Q('<div class="adv"><div class="adv__image">\u{1FA97}</div><ul><li>Zero dependency</li><li>SSR friendly</li><li>Block resize friendly</li><li>v-model controlled</li><li>Default-open feature</li><li>Dynamic content reaction</li><li>Dynamic items allowed</li><li>Animated (optional, controlled by css)</li><li>Exclude closed item&#39;s content from tab loop</li><li>All content is provided by slots</li><li>Css fully customizable</li><li>W3C validator passed</li></ul></div>',1),ce={class:"sandbox"},re=s(" Summary one"),de=s("\u261D\uFE0F"),ue=t("h3",null,"Dynamic content reaction",-1),me=t("h3",null,"All content is provided by slots (f.g. you can nest another accordion)",-1),_e=s("Nested accordion item-2 is closed default"),pe=s("+"),ve=s(" Some nested content "),fe=s("Nested accordion item-2 is opened default"),he=s("+"),ye=s(" Here some text of nested item-2 "),be=s("This item is disabled you can control it via v-model"),Ie=s(" \u{1F480}"),Ce=s(" You can control it via v-model "),ke=s("This item is dynamically added"),Se=s("D"),ge=s("Last item (with default icon) here"),Oe=t("div",null,[t("h1",null,[s(" Please subscribe "),t("a",{href:"https://www.youtube.com/channel/UCxKF1Edfy3LfvAsnveD-OVA"},"youtube channel"),s(", "),t("a",{href:"https://t.me/developers_workshop"},"telegram channel"),s(", share video, stay stars and likes ")])],-1),Ae={class:"v-model-rep"},we=t("h3",null,"Props",-1),xe=s(" Open multiple items "),De=t("h3",null,"V-model representation",-1),Ee=["checked","onChange"],Pe=t("h3",null,"Dynamic items",-1),Te=t("h3",null,"Block resize",-1),$e=L({__name:"AccordionSandbox",setup(A){const m=u({}),r=u([]),p=u([]),d=u(!1),y=u(100);function b(){r.value.push("Date now is "+Date.now())}function a(){r.value.pop()}function h(){p.value.push("Date now is "+Date.now())}function I(){p.value.pop()}function C(o,n){const e=!!n.target.checked||!1;m.value[o]=e}const k=E(()=>Object.entries(m.value));return(o,n)=>(_(),f(P,null,[le,t("div",ce,[t("div",{class:"sandbox__accordion-block",style:H({width:y.value+"%"})},[g(v(V),{state:m.value,"onUpdate:state":n[0]||(n[0]=e=>m.value=e),"open-multiple-items":d.value},{default:i(()=>[g(v(O),{id:"mId1","default-opened":""},{summary:i(()=>[re]),icon:i(()=>[de]),default:i(()=>[ue,t("div",null,[t("button",{onClick:b},"Add dynamic lines"),t("button",{onClick:a},"Remove dynamic lines")]),(_(!0),f(P,null,N(r.value,(e,l)=>(_(),f("div",{key:l},T(e),1))),128)),me,g(v(V),{"open-multiple-items":""},{default:i(()=>[g(v(O),null,{summary:i(()=>[_e]),icon:i(()=>[pe]),default:i(()=>[ve]),_:1}),g(v(O),{"default-opened":""},{summary:i(()=>[fe]),icon:i(()=>[he]),default:i(()=>[ye]),_:1})]),_:1})]),_:1}),g(v(O),{id:"mId2",disabled:""},{summary:i(()=>[be]),icon:i(()=>[Ie]),default:i(()=>[Ce]),_:1}),(_(!0),f(P,null,N(p.value,e=>(_(),q(v(O),{key:e},{summary:i(()=>[ke]),icon:i(()=>[Se]),default:i(()=>[s(" "+T(e),1)]),_:2},1024))),128)),g(v(O),{id:"mId3"},{summary:i(()=>[ge]),default:i(()=>[Oe]),_:1})]),_:1},8,["state","open-multiple-items"])],4),t("div",Ae,[we,t("div",null,[xe,Z(t("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>d.value=e),type:"checkbox"},null,512),[[G,d.value]])]),De,(_(!0),f(P,null,N(v(k),e=>(_(),f("div",{key:e[0]},[s(T(e[0])+" ",1),t("input",{checked:e[1],type:"checkbox",onChange:l=>C(e[0],l)},null,40,Ee)]))),128)),Pe,t("button",{onClick:h},"Add"),t("button",{onClick:I},"Remove"),Te,t("p",null,"now width is: "+T(y.value)+"%",1),t("button",{onClick:n[2]||(n[2]=e=>y.value-=20)},"Smaller"),t("button",{onClick:n[3]||(n[3]=e=>y.value+=20)},"Bigger")])])],64))}});var Be=B($e,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/components/AccordionSandbox.vue"]]);const Le=L({__name:"IndexPage",setup(A){return(m,r)=>(_(),q(Be))}});var Re=B(Le,[["__file","/Users/spmirtov/projects/vue3-rich-accordion/src/pages/IndexPage.vue"]]);export{Re as default};
